var naff=function(){var a=function(a){if(a=p(a),!a)throw"Origin not found, please add starting point for scope lookup";for(var b=a;b.tagName&&!b.scope;)b=b.parentNode;return b.scope?b.scope:"[object ShadowRoot]"===b.toString()?b.host.scope:null},b=function(b,c){if(b=p(b),!b)throw"Origin not specified, please add starting point for scope lookup";for(var d=a(b).parentNode;!(!d.tagName||c&&d.tagName==c.toUpperCase()&&d.scope||!c&&d.scope);)d=d.parentNode;return d.scope?d.scope:"[object ShadowRoot]"===d.toString()?d.host.scope:null},c=function(a){var b=Object.create(HTMLElement.prototype),c=document._currentScript.ownerDocument.querySelector("#"+a.name);b.createdCallback=function(){this.scope=d(a),c&&(e(this,c,a.shadowDom,a.dataBind),this.scope.template=this.shadowRoot?this.shadowRoot:this,this.scope.host=this),a.created&&this.scope.created()},b.attachedCallback=function(){l(this,this.scope,n),a.attached&&this.scope.attached()},b.detachedCallback=function(){Object.unobserve(this.scope,n),f(this),a.detached&&this.scope.detached()},b.attributeChangedCallback=function(b,c,d){a.attributeChanged&&this.scope.attributeChanged(b,c,d)};var g={prototype:b};a.extends&&(g.extends=a.extends),document.registerElement(a.name,g)},d=function(a){if(null===a||"[object Object]"!==a.toString())return a;var b=a.constructor();for(var c in a)b[c]=d(a[c]);return b},e=function(a,b,c,d){if(a=q(a),!a)throw"Host custom element not specified, please add custom element reference or lookup";var e=a.hasAttribute("shadow-dom")||!!c,f=a.hasAttribute("data-bind")||!!d,h=b.content.querySelectorAll("content[select]"),i=b.content.querySelector("content");if(h.length>0){for(var j={},k=0;k<h.length;k++)if(h[k].hasAttribute("select")){var l=h[k].getAttribute("select");j[l]=a.querySelector(l)}if(e){var m=a.createShadowRoot();m.innerHTML=b.innerHTML}else a.innerHTML=b.innerHTML;for(var n in j){var o=e?m.querySelector("content[select="+n+"]"):a.querySelector("content[select="+n+"]");o.parentNode.insertBefore(j[n],o),o.parentNode.removeChild(o)}}else if(i){var j=a.innerHTML;if(e){var m=a.createShadowRoot();m.innerHTML=b.innerHTML}else a.innerHTML=b.innerHTML;var o=e?m.querySelector("content"):a.querySelector("content");o.innerHTML=j;for(var p=document.createDocumentFragment();o.firstChild;)p.appendChild(o.firstChild);o.parentNode.replaceChild(p,o)}else if(e){var m=a.createShadowRoot();m.innerHTML=b.innerHTML}else a.innerHTML=b.innerHTML;f&&g(e?m:a,a.scope)},f=function(a){for(var b=o(a),c=0;c<b.length;c++)j(b[c])},g=function(a,b){for(var c=o(a),d=0;d<c.length;d++)i(c[d],b)},h=function(a,b,c){if(a=a.trim(),/^[0-9]+$/i.test(a))return parseInt(a);if("true"==a||"false"==a)return"true"===a?!0:!1;if("null"==a)return null;if(/^[a-z0-9-_.]+$/i.test(a)){for(var d=a.split("."),e=b[d[0]],f=1;f<d.length;f++)e=e[d[f]];return e}if(/^[a-z0-9-_]+\({1}.*\){1}\;?$/i.test(a)){for(var g=a.replace(/[\)\;]/g,"").split("("),i=g[0],j=g[1].split(","),f=0;f<j.length;f++)j[f]=h(j[f],b);if(!b[i])return;return c?{func:b[i],props:j}:b[i].apply(b,j)}return/^(\'|\"){1}.*(\'|\"){1}$/.test(a)?a.substring(1,a.length-1):void 0},i=function(a,b){var c=a.getAttribute("naff").split("|");if(!(c.length<2))switch(c[0]){case"text":a.innerText=h(c[1],b);break;case"html":a.innerHTML=h(c[1],b);break;default:"on"==c[0].substring(0,2)&&a.addEventListener(c[0].substring(2,c[0].length),k,!1)}},j=function(a){var b=a.getAttribute("naff").split("|");b.length<2||"on"==b[0].substring(0,2)&&a.removeEventListener(b[0].substring(2,b[0].length),k,!1)},k=function(a){var b=this.getAttribute("naff").split("|");if(!(b.length<2)){var c=naff.getScope(this),d=h(b[1],c,!0);d.props.unshift(a,this),d.func.apply(c,d.props)}},l=function(a,b,c,d){for(var e in b)b[e]&&"object"==typeof b[e]&&"[object Object]"==b[e].toString()&&l(a,b[e],c,d+"."+e);Object.observe(b,function(b){c.apply(a,[b,d])})},n=function(a,b){b=b?b.replace("undefined.",""):"",b.length>0&&(b+=".");for(var c=0;c<a.length;c++){var d=a[c],e=a[c].name;this.scope.observer&&this.scope.observer.apply(this.scope,[b+e,d]);for(var f=this.querySelectorAll("[naff*='"+b+e+"']"),c=0;c<f.length;c++)f[c].getAttribute("naff").split("|")[1]==b+e&&i(f[c],this.scope)}},o=function(a){for(var b=a.childNodes,c=[],d=0;d<b.length;d++)"#text"!=b[d].nodeName&&b[d].hasAttribute("naff")&&c.push(b[d]),!b[d].scope&&b[d].childNodes.length>0&&(c=c.concat(o(b[d])));return c},p=function(a){switch(typeof a){case"undefined":return null;case"string":return document.querySelector(a);case"object":return a.scope?a.parentNode:a}},q=function(a){switch(typeof a){case"undefined":return null;case"string":return document.querySelector(a);case"object":return a}};return{getScope:a,getParentScope:b,registerElement:c,cloneObject:d}}();